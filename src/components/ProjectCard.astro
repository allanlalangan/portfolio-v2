---
const { project } = Astro.props;
// console.log(project.image.src.asset);
import { createImageBuilder } from 'astro-sanity';
import { useSanityClient } from 'astro-sanity';
export const imageBuilder = createImageBuilder(useSanityClient());

export function urlForImage(source) {
	return imageBuilder.image(source);
}
---

<li
	class='col-span-12 mb-8 flex w-full flex-col border-2 border-gray-700 bg-gray-900 shadow-md lg:flex-row'
>
	<article class='flex flex-1 flex-col p-4'>
		<h3 class='text-2xl text-yellow-200'>{project.name}</h3>
		<p class='my-4 flex-1'>{project.description}</p>
		{
			project.demo && (
				<section class='mb-4 w-1/2 border-b-2 border-yellow-200 pb-2'>
					<h4 class='mb-2 w-fit border-b-2 border-yellow-200 text-xl text-yellow-200'>
						Try it out!
					</h4>
					<p>email: {project.demo.email}</p>
					<p>password: {project.demo.password}</p>
				</section>
			)
		}

		<section class='grid grid-cols-4'>
			<a
				href={project.link}
				target='_blank'
				rel='noreferrer noopener'
				class='col-span-2 border-r border-t-2 border-b-2 border-l-2 border-yellow-200 py-4 text-center text-lg uppercase tracking-wide text-yellow-200 transition hover:bg-yellow-200 hover:text-gray-900'
				>Live</a
			>
			<a
				href={project.repo}
				target='_blank'
				rel='noreferrer noopener'
				class='col-span-2 border-t-2 border-l border-b-2 border-r-2 border-yellow-200 py-4 text-center text-lg uppercase tracking-wide text-yellow-200 transition hover:bg-yellow-200 hover:text-gray-900'
				>Repo</a
			>
		</section>
	</article>
	<figure
		class='flex flex-1 border-t-2 border-gray-700 lg:border-t-0 lg:border-l-2'
	>
		<img
			class='object-cover'
			src={urlForImage(project.image.src.asset).url()}
			alt={project.image.alt}
		/>
	</figure>
</li>
